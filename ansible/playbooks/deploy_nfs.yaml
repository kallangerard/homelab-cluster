---
- name: Create NFS Client Provisioner for Kubernetes
  hosts: k8s_master
  gather_facts: no
  tasks:
    - name: Add default Helm Repo
      command: helm repo add stable https://kubernetes-charts.storage.googleapis.com

    - name: Update Helm Repo
      command: helm repo update

    - name: Install Helm Chart for NFS Provisioner
      command: helm install my-nfs stable/nfs-client-provisioner --set nfs.server={{ k8s_nfs_hostname }} --set nfs.path={{ k8s_nfs_path }}